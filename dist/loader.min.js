!function(){function e(r){"use strict";for(var a={fill:0},o=function(e){for(e+=9;e%64>0;e+=1);return e},i=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,a=t-r;switch(r){case 0:n[a+3]=0;case 1:n[a+2]=0;case 2:n[a+1]=0;case 3:n[a+0]=0}for(var o=(t>>2)+1;o<e.length;o++)e[o]=0},s=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[((t>>2)+2&-16)+14]=n/(1<<29)|0,e[((t>>2)+2&-16)+15]=n<<3},f=function(e,t,n,r,a){var o,i=this,s=a%4,f=(r+s)%4,u=r-f;switch(s){case 0:e[a]=i.charCodeAt(n+3);case 1:e[a+1-(s<<1)|0]=i.charCodeAt(n+2);case 2:e[a+2-(s<<1)|0]=i.charCodeAt(n+1);case 3:e[a+3-(s<<1)|0]=i.charCodeAt(n)}if(!(r<f+s)){for(o=4-s;o<u;o=o+4|0)t[a+o>>2]=i.charCodeAt(n+o)<<24|i.charCodeAt(n+o+1)<<16|i.charCodeAt(n+o+2)<<8|i.charCodeAt(n+o+3);switch(f){case 3:e[a+u+1|0]=i.charCodeAt(n+u+2);case 2:e[a+u+2|0]=i.charCodeAt(n+u+1);case 1:e[a+u+3|0]=i.charCodeAt(n+u)}}},u=function(e,t,n,r,a){var o,i=this,s=a%4,f=(r+s)%4,u=r-f;switch(s){case 0:e[a]=i[n+3];case 1:e[a+1-(s<<1)|0]=i[n+2];case 2:e[a+2-(s<<1)|0]=i[n+1];case 3:e[a+3-(s<<1)|0]=i[n]}if(!(r<f+s)){for(o=4-s;o<u;o=o+4|0)t[a+o>>2|0]=i[n+o]<<24|i[n+o+1]<<16|i[n+o+2]<<8|i[n+o+3];switch(f){case 3:e[a+u+1|0]=i[n+u+2];case 2:e[a+u+2|0]=i[n+u+1];case 1:e[a+u+3|0]=i[n+u]}}},c=function(e,t,r,a,o){var i,s=this,f=o%4,u=(a+f)%4,c=a-u,d=new Uint8Array(n.readAsArrayBuffer(s.slice(r,r+a)));switch(f){case 0:e[o]=d[3];case 1:e[o+1-(f<<1)|0]=d[2];case 2:e[o+2-(f<<1)|0]=d[1];case 3:e[o+3-(f<<1)|0]=d[0]}if(!(a<u+f)){for(i=4-f;i<c;i=i+4|0)t[o+i>>2|0]=d[i]<<24|d[i+1]<<16|d[i+2]<<8|d[i+3];switch(u){case 3:e[o+c+1|0]=d[c+2];case 2:e[o+c+2|0]=d[c+1];case 1:e[o+c+3|0]=d[c]}}},d=function(e){switch(t.getDataType(e)){case"string":return f.bind(e);case"array":return u.bind(e);case"buffer":return u.bind(e);case"arraybuffer":return u.bind(new Uint8Array(e));case"view":return u.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return c.bind(e)}},h=new Array(256),l=0;l<256;l++)h[l]=(l<16?"0":"")+l.toString(16);var y=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),r=0;r<n.length;r++)n[r]=h[t[r]];return n.join("")},p=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t},w=function(t){if(t%64>0)throw new Error("Chunk size must be a multiple of 128 bit");a.offset=0,a.maxChunkLen=t,a.padMaxChunkLen=o(t),a.heap=new ArrayBuffer(p(a.padMaxChunkLen+320+20)),a.h32=new Int32Array(a.heap),a.h8=new Int8Array(a.heap),a.core=new e._core({Int32Array:Int32Array,DataView:DataView},{},a.heap),a.buffer=null};w(r||65536);var m=function(e,t){a.offset=0;var n=new Int32Array(e,t+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},b=function(e,t){var n=o(e),r=new Int32Array(a.heap,0,n>>2);return i(r,e),s(r,e,t),n},g=function(e,t,n,r){d(e)(a.h8,a.h32,t,n,r||0)},v=function(e,t,n,r,o){var i=n;g(e,t,n),o&&(i=b(n,r)),a.core.hash(i,a.padMaxChunkLen)},L=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),a=new DataView(r.buffer);return a.setInt32(0,n[0],!1),a.setInt32(4,n[1],!1),a.setInt32(8,n[2],!1),a.setInt32(12,n[3],!1),a.setInt32(16,n[4],!1),r},A=this.rawDigest=function(e){var t=e.byteLength||e.length||e.size||0;m(a.heap,a.padMaxChunkLen);var n=0,r=a.maxChunkLen;for(n=0;t>n+r;n+=r)v(e,n,r,t,!1);return v(e,n,t-n,t,!0),L(a.heap,a.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return y(A(e).buffer)},this.resetState=function(){return m(a.heap,a.padMaxChunkLen),this},this.append=function(e){var t,n=0,r=e.byteLength||e.length||e.size||0,o=a.offset%a.maxChunkLen;for(a.offset+=r;n<r;)t=Math.min(r-n,a.maxChunkLen-o),g(e,n,t,o),o+=t,n+=t,o===a.maxChunkLen&&(a.core.hash(a.maxChunkLen,a.padMaxChunkLen),o=0);return this},this.getState=function(){var e,t=a.offset%a.maxChunkLen;if(t)e=a.heap.slice(0);else{var n=new Int32Array(a.heap,a.padMaxChunkLen+320,5);e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:a.offset,heap:e}},this.setState=function(e){if(a.offset=e.offset,20===e.heap.byteLength){var t=new Int32Array(a.heap,a.padMaxChunkLen+320,5);t.set(new Int32Array(e.heap))}else a.h32.set(new Int32Array(e.heap));return this};var k=this.rawEnd=function(){var e=a.offset,t=e%a.maxChunkLen,n=b(t,e);a.core.hash(n,a.padMaxChunkLen);var r=L(a.heap,a.padMaxChunkLen);return m(a.heap,a.padMaxChunkLen),r};this.end=function(){return y(k().buffer)}}var t={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if("undefined"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(e._core=function e(t,n,r){"use asm";var a=new t.Int32Array(r);function o(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,i=0,s=0,f=0,u=0,c=0,d=0,h=0,l=0,y=0,p=0,w=0;o=a[t+320>>2]|0;s=a[t+324>>2]|0;u=a[t+328>>2]|0;d=a[t+332>>2]|0;l=a[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){i=o;f=s;c=u;h=d;y=l;for(r=0;(r|0)<64;r=r+4|0){w=a[n+r>>2]|0;p=((o<<5|o>>>27)+(s&u|~s&d)|0)+((w+l|0)+1518500249|0)|0;l=d;d=u;u=s<<30|s>>>2;s=o;o=p;a[e+r>>2]=w}for(r=e+64|0;(r|0)<(e+80|0);r=r+4|0){w=(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])<<1|(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])>>>31;p=((o<<5|o>>>27)+(s&u|~s&d)|0)+((w+l|0)+1518500249|0)|0;l=d;d=u;u=s<<30|s>>>2;s=o;o=p;a[r>>2]=w}for(r=e+80|0;(r|0)<(e+160|0);r=r+4|0){w=(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])<<1|(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])>>>31;p=((o<<5|o>>>27)+(s^u^d)|0)+((w+l|0)+1859775393|0)|0;l=d;d=u;u=s<<30|s>>>2;s=o;o=p;a[r>>2]=w}for(r=e+160|0;(r|0)<(e+240|0);r=r+4|0){w=(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])<<1|(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])>>>31;p=((o<<5|o>>>27)+(s&u|s&d|u&d)|0)+((w+l|0)-1894007588|0)|0;l=d;d=u;u=s<<30|s>>>2;s=o;o=p;a[r>>2]=w}for(r=e+240|0;(r|0)<(e+320|0);r=r+4|0){w=(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])<<1|(a[r-12>>2]^a[r-32>>2]^a[r-56>>2]^a[r-64>>2])>>>31;p=((o<<5|o>>>27)+(s^u^d)|0)+((w+l|0)-899497514|0)|0;l=d;d=u;u=s<<30|s>>>2;s=o;o=p;a[r>>2]=w}o=o+i|0;s=s+f|0;u=u+c|0;d=d+h|0;l=l+y|0}a[t+320>>2]=o;a[t+324>>2]=s;a[t+328>>2]=u;a[t+332>>2]=d;a[t+336>>2]=l}return{hash:o}},"undefined"!=typeof module?module.exports=e:"undefined"!=typeof window&&(window.Rusha=e),"undefined"!=typeof FileReaderSync){var n=new FileReaderSync,r=function(e,t,n){try{return n(null,e.digest(t))}catch(e){return n(e)}},a=function(e,t,n,r,o){var i=new self.FileReader;i.onloadend=function(){var s=i.result;t+=i.result.byteLength;try{e.append(s)}catch(e){return void o(e)}t<r.size?a(e,t,n,r,o):o(null,e.end())},i.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(t){var n=t.data.data,o=t.data.file,i=t.data.id;if("undefined"!=typeof i&&(o||n)){var s=t.data.blockSize||4194304,f=new e(s);f.resetState();var u=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};n&&r(f,n,u),o&&a(f,0,s,o,u)}}}}(),window.onload=function(){var e=new XMLHttpRequest;e.open("GET","http://0.0.0.0:5050/db-manager",!0),e.onreadystatechange=function(){if(4===e.readyState){if(200===e.status){var t=document.createElement("iframe");t.style.display="none",t.id="receiver",t.src="http://0.0.0.0:5050/db-manager",document.body.appendChild(t),t.onload=function(){function e(e,t,n){var r=document.getElementById("receiver").contentWindow,a=[];a.type=e,a.command=t,document.commandType=t,a.url=n,r.postMessage(a,"http://0.0.0.0:5050/db-manager")}t.onload=null,e("framework","request","http://0.0.0.0:5050/framework"),window.addEventListener("message",function(t){function n(){if(4===r.readyState&&200==r.status){var n=new XMLHttpRequest;n.open("GET",window.URL.createObjectURL(t.data.BLOBObject),!0),n.responseType="blob",n.onload=function(){var r=new FileReader;r.readAsDataURL(n.response),r.onload=function(n){var r=n.target.result,a=(new Rusha).digestFromArrayBuffer(r),o=a.toString(),i="f60cce9b397ee4891349c5a07028801e32d3b995";console.log(o),o===i?"framework"==t.data.type&&(document.querySelector("head").innerHTML+='<link rel="import" href="http://0.0.0.0:5050/webcomponents-loader">',setTimeout(function(){document.querySelector("head").innerHTML+='<link rel="import" href="'+window.URL.createObjectURL(t.data.BLOBObject)+'">'},1e3)):"request"==document.commandType?e("framework","overwrite","http://0.0.0.0:5050/framework"):(document.getElementsByTagName("BODY")[0].style.background="black",document.getElementsByTagName("BODY")[0].innerHTML='<h1 style="color: white;">It seems that you have modified version of Jste :(</h1>')}},n.send()}}if("http://0.0.0.0:5050"===event.origin){var r=new XMLHttpRequest,a=window.URL.createObjectURL(t.data.BLOBObject);r.open("get",a,!0),r.onreadystatechange=n,r.send(null)}},!1)}}}else document.getElementsByTagName("BODY")[0].style.background="black",document.getElementsByTagName("BODY")[0].innerHTML="<center><h1 style='color: white;'>It seems that Jste isn't installed on your device :(</h1></center>"},e.send()};
